function isiPhone(){return-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod")||-1!=navigator.platform.indexOf("iPad")||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}fillView=function(options){var tempVista;tempVista="string"==typeof options.view?options.view:options.view[0].innerHTML;var config=$.extend({data:null,view:"<p>Utiliza una vista válida</p>",opt:null},options),regX=/[\{\{\}\}]*/g,data=config.data,tmpView=tempVista,arr=tmpView.match(/\{\{([^ \{\}])+\}\}/g),opt=config.opt,txt="";if(arr)for(var length=arr.length,val,i=0;i<length;i++){if(val=arr[i].replace(regX,""),void 0==data[val]&&-1==val.indexOf(".")&&(data[val]=""),opt)for(var key in opt)if(val==key)for(var subKey in opt[key])if(data[val]==subKey){tmpView=tmpView.replace(arr[i],opt[key][subKey]);break}try{txt=eval("data."+val)}catch(e){txt=""}tmpView=tmpView.replace(arr[i],txt)}return tmpView},fillViews=function(e,t,a){for(var s,n="",l=0,o=e.length;l<o;l+=1){if(null!==a&&void 0!==a)for(var r=0,i=a.length;r<i;r+=1)s=a[r],l===s.init&&(e[l].customClass=s.class),l>s.init&&l>=s.init+s.interval&&(l-s.init)%s.interval==0&&(e[l].customClass=s.class);n+=fillView({data:e[l],view:t})}return n};var Alert=function(){var e,t,a={},s={},n={},l={fillMessage:function(e){var t="";return"object"==typeof e&&(t=fillView({data:e,view:e.view})),t},setMessage:function(e){var t;t=void 0!=e.view?e.view[0].innerHTML:o.view,a=$.extend({},{el:e.el||o.el,target:e.target||o.target,classe:e.classe||o.classe,type:e.type||o.type,title:e.title||o.title,message:e.message||o.message,view:t,onComplete:null,onClose:null,redirect:null},e)},showMessage:function(l){var o;if(void 0===a||void 0===a.el)throw'Messages PlugIn :: Fill the data of the message... Example: {classe:[string: "error" or "success" ], title:[string], message:[string]}';t=a.target,$("#"+a.el).length?e=$("#"+a.el):(e=document.createElement("DIV"),e.id=a.el,e.className=a.classe,e=$(e),$("#"+t).length||$("#js").append('<div id="'+t+'"></div>'),$("#"+t).append(e)),e.fadeIn("fast",function(e){null!==a.onComplete&&"function"==typeof a.onComplete&&a.onComplete()}),s[a.el]=null!==a.onClose?a.onClose:null,n[a.el]=null!==a.redirect?a.redirect:null,e.html(Alert.fillMessage(a)),o=$("#"+a.el),o.off("click"),$(o.find(".Lbox-cont")).css({"margin-top":Math.round(($(o.find(".Lbox-cont")).height()+88)/-2)}),o.hasClass("Lbox")&&"modal"!=l&&(o.on("click",".Lbox-overlay",function(e){$(this);e.stopPropagation(),Alert.close(o)}),o.on("click",".Lbox-cont",function(e){$(this);e.stopPropagation()})),o.on("click",".btn-close, .lbox-close, .btn-accept, .btn-cancel",function(e){var t=$(this),a=!!t.hasClass("btn-accept");e.stopPropagation(),Alert.close(o,a)})},close:function(e,t){var l=e.attr("id");e.fadeOut("fast",function(){null!==n[l]&&"string"==typeof n[l]?window.location=a.redirect:null!==s[l]&&"function"==typeof s[l]&&s[l](t)})}},o={el:"messageLbox",target:"lbox",classe:"Lbox",type:"error",title:"Error",message:"Ocurrio un Error inesperado",view:'<div class="Lbox-overlay"><div class="Lbox-holder"><div class="Lbox-cont"><span class="btn-close"></span><span class="ico-status {{type}}"></span><h3 class="Lbox-title">{{title}}</h3><p class="Lbox-desc">{{message}}</p></div></div></div>'};return l}(),eventoClick="",customSelect=function(){var e=(function(){eventoClick=isiPhone()?"touchstart":"click tap",$(document).on(eventoClick,function(e){t($(".customSelect"))}),$("body").on(eventoClick,".customSelect",function(e){var a=$(this);if(a.hasClass("disabled"))return!1;a.hasClass("open")?t(a):isiPhone()?a.find("select").trigger("focus"):(t($(".customSelect")),a.addClass("open"),a.find("select").trigger("focus")),e.stopPropagation()}),$("body").on("focus","select, .customSelect-search",function(e){var a=$(this).closest(".customSelect");isiPhone()||(t($(".customSelect")),a.addClass("open")),e.stopPropagation()}),$("body").on("click tap",".customSelect-options label",function(e){var s=$(this),n=(s.index(),s.parent().children()),l=s.closest(".customSelect").find("select"),o=s.closest(".customSelect").find(".customSelect-label"),r=!!s.closest(".customSelect").hasClass("multiple");e.stopPropagation(),s.hasClass("selected")||(r?(s.addClass("selected hide"),a(s)):(n.removeClass("selected"),o.text(s.text()),s.addClass("selected"),t(s.closest(".customSelect"))),l.find("option").get(s.index()).selected=!0,$(l).trigger("change"))}),$("body").on("change","select",function(){var e=$(this),t=e.parents(".customSelect"),a=t.find(".customSelect-label"),s=(e.val(),e.find("option:selected").text());a.text(s)}),$("body").on("keydown","select",function(a){var s=a.keyCode,n=$(this).closest(".customSelect");switch(s){case 13:case 40:case 38:a.preventDefault(),e(n,s);break;case 39:case 37:a.preventDefault();break;case 27:t(n)}}),$("body").on("keydown",".customSelect-search",function(e){13==e.keyCode&&e.preventDefault()}),$("body").on("keyup",".customSelect-search",function(t){var a=t.keyCode,n=$(this).closest(".customSelect");n.find(".customSelect-options label").not(".hide");switch(a){case 13:case 40:case 38:t.preventDefault(),e(n,a);break;case 39:case 37:break;default:s.filter(n)}}),$("body").on("click tap",".customSelect input, .customSelect-filter",function(e){e.stopPropagation()}),$("body").on("click tap",".customSelect-tag",function(e){var t=$(this),a=$("#"+t.closest(".customSelect-tagList").attr("id").replace("customTags-","custom-")),s=$(a.find("select")),n=t.attr("data-index");$(s.find("option").get(n))[0].selected=!1,$(a.find(".customSelect-options label").get(n)).removeClass("selected hide"),t.remove()})}(),function(e,t){var a=e.find(".customSelect-options label").not(".hide"),s=e.find(".active");if(13==t&&s.length)try{$(s[0]).trigger("click")}catch(e){}if(s.length){for(var n=0,l=a.length;n<l;n++)if(s[0]==a[n]){switch(a.removeClass("active"),t){case 40:s=$(a[n+1]).addClass("active");break;case 38:s=$(a[n-1]).addClass("active")}s.length||$(a[n]).addClass("active");break}}else $(a[0]).addClass("active")}),t=function(e){e.removeClass("open"),e.find("label").removeClass("active"),e.hasClass("multiple")||e.find("label").removeClass("hide"),e.find(".customSelect-search").val("")},a=function(e){var t,a,s,n="";if("SELECT"==e[0].tagName){a=e.find(":selected");for(var l=0,o=a.length;l<o;l++)s=$(a[l]),n+='<span class="customSelect-tag" data-val="'+s.val()+'" data-index="'+s.index()+'">'+s.text()+"</span>";return n}n='<span class="customSelect-tag" data-val="'+e.attr("data-val")+'" data-index="'+e.index()+'">'+e.text()+"</span>",t=$("#customTags-"+e.closest(".customSelect").find("select")[0].id),t.append(n)},s={update:function(e){var t=function(e){var t=$(document.createElement("SPAN")),n=s(e),l="",o="",r=!!e.hasClass("filter"),i=!!e.attr("multiple");e[0].form.id&&e[0].form.id;i&&(e.addClass("multiple"),t.attr("multiple",!0),o='<div id="customTags-'+e.attr("id")+'" class="customSelect-tagList">'+a(e)),l='<span class="currentSelect"></span><span class="customSelect-label">'+n.label+'</span><i class="customSelect-arrow"></i>',r&&(l+='<span class="customSelect-filter"><input type="text" class="customSelect-search noLabel" data-name="" id="auto_"  autocomplete="off" /></span>'),l+='<span class="customSelect-options">'+n.html+"</span>",l+="</span>",t[0].className="customSelect "+e[0].className+(e.is(":disabled")?" disabled":""),void 0!==e.attr("id")&&(t[0].id="custom-"+e.attr("id")),t.html(l),e.wrap(t),$(o).insertAfter(e.closest(".customSelect"))},s=function(e){for(var t,a,e,s=e.find("option"),n=e,l="",o=0,r=s.length;o<r;o++)e=$(s[o]),t="",0==o&&(a=e.text()),e.is(":selected")&&(t='class="selected"',a=e.text(),n.attr("multiple")&&(t='class="selected hide"')),n.attr("multiple")&&(a=n.attr("data-name")),l+="<label "+t+' data-val="'+e.val()+'" >'+e.text()+"</label>";return{html:l,label:a}};!function(){var a,n;if(!isiPhone())for(var l=0,o=e.length;l<o;l++)a=$(e[l]),a.closest(".customSelect").length?(n=s(a),a.closest(".customSelect").find(".customSelect-options").html(n.html),a.closest(".customSelect").find(".customSelect-label").html(n.label)):t(a)}()},filter:function(e,t){var a,s=e.find(".customSelect-search"),n=e.find(".customSelect-options label"),t=t||s.val();if(n.removeClass("hide active"),e.hasClass("multiple")&&e.find(".selected").addClass("hide"),s.val().length<3)return!1;for(i=n.length-1;i>=0;i--)a=$(n[i]),-1==a.text().toLowerCase().indexOf(t)&&a.addClass("hide")},reset:function(e){for(var t,a,s=0,n=e.length;s<n;s++)t=$(e[s]),a=t.closest(".customSelect"),a[0].className="customSelect "+t[0].className,$(t.find("options")).attr("selected",!1),a.find(".customSelect-options label").removeClass("hide active selected"),a.hasClass("multiple")?($(e.find("option")).attr("selected",!1),$("#customTags-"+a.attr("id")).find(".customSelect-tag").remove()):a.find(".customSelect-options label:first-child").trigger("click")}};!function(){var e=$("select").not(".noCustom");if(isiPhone())for(var t=e.length-1;t>-1;t--)$(e[t]).wrap('<span class="maskSelect"></span>'),$(e[t]).addClass("maskSelect"),$(e[t]).parent().addClass("maskSelect");else for(var t=e.length-1;t>-1;t--)s.update($(e[t]))}();return s}();$.fn.extend({updateSelect:function(){customSelect.update($(this))},resetSelect:function(){customSelect.reset($(this)),customFields.reset($(this))}});var customFields=function(){!function(){var e="[type=text], [type=email], [type=password], textarea, [type=tel]";$("body").on("focus",e,function(e){if($(this).closest(".currentInput").addClass("activo"),$(this).hasClass("password")){var t=$(this);$(t).removeAttr("type").prop("type","password")}}),$("body").on("blur",e,function(e){var t=$(this),a=t.closest(".currentInput");t.val()!==t.attr("data-name")&&t.val().length>=1?a.addClass("listo"):(a.removeClass("listo"),$(t).hasClass("password")&&$(t).removeAttr("type").prop("type","text")),a.removeClass("activo")}),$("body").on("change","select",function(e){var t=$(this),a=t.parents(".customSelect").parents(".currentInput");return isiPhone()?""!=t.val()&&t.val().length>=1?t.parents(".currentInput").addClass("listo"):t.parents(".currentInput").removeClass("listo"):t.val()!=t.attr("data-name")&&t.val().length>=1?a.addClass("listo"):a.removeClass("listo"),!1}),$("body").on("change","select",function(e){var t=$(this),a=t.closest(".currentInput");""!==t.val()?a.addClass("listo"):a.removeClass("listo")}),$("body").on("blur","select",function(e){var t=$(this),a=t.closest(".currentInput");setTimeout(function(){a.removeClass("activo")},200)})}();_namespace={update:function(e){var t=function(e){var t=document.createElement("SPAN"),a=e.attr("data-name"),s="";e.val()!=a&&(s=" listo"),e.hasClass("customSelect")&&(a=$(e.find("select")).attr("data-name"),""==$(e.find("select")).val()&&(s="")),e.hasClass("maskSelect")&&(console.info("label aqui: ",e),a=$(e).attr("data-name"),""==$(e).val()&&(s="")),t.className="currentInput"+s,e.wrap(t),e.parent().append('<label class="currentInput-label" >'+a+"</label>")};!function(){for(var a,s=0,n=e.length;s<n;s++)a=$(e[s]),a.closest(".currentInput").length||t(a)}()},reset:function(e){e.closest(".listo").removeClass("listo")},updateCheck:function(e){var t=function(e){var t,a=document.createElement("SPAN");a.className="flCh",t="radio"==e.attr("type")?"lbRd":"lbCh",e.parents("label").addClass(t),e.parents("label").append('<span class="flCh"></span>')};!function(){for(var a,s=0,n=e.length;s<n;s++)a=$(e[s]),a.closest(".flCh").length||t(a)}()}};!function(){for(var e=$(".withLabel"),t=$("[type=checkbox], [type=radio]"),a=e.length-1;a>-1;a--)_namespace.update($(e[a]));for(var a=t.length-1;a>-1;a--)_namespace.updateCheck($(t[a]));$.fn.extend({updateInput:function(){_namespace.update($(this))}})}();return _namespace}(),placeholders=function(){var e="[type=text],[type=email],[type=password], textarea, [type=tel]";!function(){for(var t,a=$(e),s=0,n=a.length;s<n;s++)t=$(a[s]),""==t.val().replace(/\s/g,"")&&t.val(t.attr("data-name"));$("body").on("focusin",e,function(e){var t=$(this);if(void 0==t.attr("data-name")){var a=t.val();t.attr("data-name",a)}t.val()==t.attr("data-name")&&void 0==t.attr("readonly")&&t.val("")}),$("body").on("focusout",e,function(e){var t=$(this);0==t.val().replace(/\s/g,"").length&&t.val(t.attr("data-name"))})}()}();$.fn.extend({resetInput:function(){$(this).val(""),$(this).trigger("blur")}});var valForm=function(){var e={fields:"textarea, [type=text], [type=email], [type=password], [type=email], [type=tel]",checks:"[type=radio], [type=checkbox]",group:".group-input input",selects:"select",messages:{defaults:{required:"Campo requerido",name:"Escribe tu nombre",lastname:"Escribe tu apellido",number:"Sólo números enteros",decimal:"Números enteros o decimales",email:"Use un correo electrónico válido",select:"Selecciona una opción",group:"Selecciona al menos una opción",confirm:"Los campos no coinciden",tel:"Teléfono invalido"},en:{required:"Required field",name:"Name or last name",lastname:"Last name",number:"Only integer alowed",decimal:"Only decimal number alowed",email:"Invalid email",select:"Select an option",group:"At least, select an option",confirm:"Los campeishon no coinciden",tel:"Invalid Phone number"}},config:{tips:!0}},t={name:{regx:/^[a-záéíóúñ ']+$/gi},lastname:{regx:/^[a-záéíóúñ ']+$/gi},email:{regx:/^[^\s]*[a-zA-Z0-9\._-]{1,}@([a-zA-Z0-9]{2,})+(\.[a-zA-Z0-9]{2,})+$/g},number:{regx:/^-?[0-9]+$/g},decimal:{regx:/^-?[0-9]*.?[0-9]+$/gi},tel:{regx:/^([0-9][\s\.-]?){10, 15}/g},rfc:{regx:/^[A-Z,Ñ,&amp;]{3,4}[0-9]{2}[0-1][0-9][0-3][0-9][A-Z,0-9]?[A-Z,0-9]?[0-9,A-Z]?/gi},curp:{regx:/^[A-Z]{1}[AEIOU]{1}[A-Z]{2}[0-9]{2}(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[HM]{1}(AS|BC|BS|CC|CS|CH|CL|CM|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[B-DF-HJ-NP-TV-Z]{3}[0-9A-Z]{1}[0-9]{1}$/gi},contrasena:{regx:/^[A-Za-z0-9]{8,12}$/g}},a=e.messages,s=$("html").attr("lang"),n=null,l=!0,o=function(e,t){var o="";try{o=a[s][t]}catch(e){o=a.defaults[t]}if(void 0==o&&(o=e.hasClass("required")?void 0!==a[s]&&void 0!==a[s].required?a[s].required:a.defaults.required:'Mensaje de la clase <strong>"'+t+'"</strong> en el idioma <strong>"'+s+'"</strong> no esta definido.'),e.hasClass("maskSelect")&&e.parents(".maskSelect").addClass("error"),e.parent().hasClass("hintTip"))e.parent().addClass("error");else{e.wrap('<span class="hintTip error" />'),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").addClass("visible");var r,i=e.parents("form").find(".hasDatepicker");for(d=0;d<i.length;d++)$(i[d]).hasClass("required")&&(r=$(i[d]).parents(".currentInput").find(".fecha-gris"),r.addClass("error"))}n||(n=e,e.trigger("focus")),l=!1};return{messages:function(t){var a=e.messages;for(var s in t)if(void 0==a[s])a[s]=t[s];else for(var n in t[s])a[s][n]=t[s][n]},class:function(e){for(var a in e)if(void 0==t[a])t[a]=e[a];else for(var s in e[a])t[a][s]=e[a][s]},validate:function(a){var s=$.extend({},{form:null,success:null},a),r=function(e){var a=[];for(key in t)e.hasClass(key)&&a.push(key);return a},i=function(e,a){var s,n=e.val(),l=a||r(e),i=e.attr("data-confirm");if("select"==l)return console.info("validar sleect"),e.hasClass("maskSelect")&&""!=e.val()&&e.parents(".maskSelect").removeClass("error").addClass("listo"),""!=e.val()?(e.parents(".hintTip").removeClass("error"),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").removeClass("visible"),!1):(e.parents(".hintTip").addClass("error"),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").addClass("visible"),!1);if("checks"==l)return e.is(":checked")?($(e.closest(".hintTip")).removeClass("error"),!1):($(e.closest(".hintTip")).addClass("error"),!1);if(0==l.length&&(l=["required"]),""==e.val()&&0==e.hasClass("required"))return e.parent().removeClass("error"),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").removeClass("visible"),!1;if(1==e.hasClass("required")&&e.val()==e.attr("data-name"))return o(e,l),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").addClass("visible"),!1;if(!i)for(var c=0,u=l.length;c<u;c++)if("required"==l[c]){if(e.val()==e.attr("data-name")||""==e.val()){o(e,l[c]),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").addClass("visible");break}e.parent().removeClass("error"),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").removeClass("visible")}else{if(null===n.match(t[l[c]].regx)){o(e,l[c]),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").addClass("visible");break}e.parent().removeClass("error"),e.parents(".currentInput").length&&e.parents(".currentInput").next(".msj").removeClass("visible")}i&&(s=$("#"+i).val(),e.val()!==s?o(e,"confirm"):e.parent().removeClass("error"))},c=function(e){e.is(":checked")?$(e.closest(".hintTip")).removeClass("error"):o(e.closest("label"),"required")},u=function(e){var t=e.find(":checked"),a=e.find(".group-label");!t.length&&e.hasClass("required")?o(a,"group"):a.closest(".hintTip").removeClass("error")},d=function(e){var a=r(e),s=e.find(".group-label"),n=e;0==t[a].custom(e)&&(s.length&&(n=s),o(n,a))},p=function(e){var t;t=isiPhone()?e.closest(".maskSelect"):e.closest(".customSelect"),""==e.val()||null==e.val()?o(t,"select"):e.closest(".hintTip").removeClass("error")},f=function(a){l=!0;var o=s.form.find("fieldset").not(".noValidate"),r=o.find(e.fields),f=o.find("[type=radio], [type=checkbox]"),m=o.find(".group-input"),v=o.find("select"),h="";n=null;for(var g=0,C=r.length;g<C;g++)$(r[g]).hasClass("required")&&i($(r[g]));for(var g=0,C=f.length;g<C;g++)$(f[g]).hasClass("required")&&c($(f[g]));for(var g=0,C=m.length;g<C;g++)$(m[g]).hasClass("required")&&u($(m[g]));for(var g=0,C=v.length;g<C;g++)$(v[g]).hasClass("required")&&p($(v[g]));for(var b in t)void 0!==t[b].custom&&"function"==typeof t[b].custom&&(h+="."+b+" ");h=o.find(h);for(var g=0,C=h.length;g<C;g++)d($(h[g]));l&&(null!==s.success&&"function"==typeof s.success?s.success.call():(s.form.off("submit"),s.form.submit()))};!function(){if(!s.form)throw'Error: "form" not defined!';s.form.on("keydown",e.fields,function(e){var t=$(this);t.hasClass("noNumbers")&&e.keyCode>47&&e.keyCode<58&&e.preventDefault(),t.hasClass("onlyNumbers")&&((e.keyCode<=47||e.keyCode>=191)&&8!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode&&e.preventDefault(),e.keyCode>=58&&e.keyCode<=95&&e.preventDefault())}),s.form.on("keyup",e.fields,function(e){var t=$(this);r(t);i(t)}),s.form.on("change",e.selects,function(e){var t=$(this);r(t);i(t,"select")}),s.form.on("change",e.checks,function(e){var t=$(this);r(t);i(t,"checks")}),s.form.on("change",e.groups,function(e){var t=$(this);r(t);u(t,"checks")}),s.form.on("submit",function(e){e.preventDefault(),f()})}()}}}();!function(){!function(){console.info("Instalación correcta de main.js")}()}();